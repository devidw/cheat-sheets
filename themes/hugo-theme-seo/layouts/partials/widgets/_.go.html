{{ $here := .context }}
{{ if .widgets }}
  <div class="widgets{{ with .widgetArea }} {{ . }}{{ end }}">
    {{ range .widgets }}{{/* full path looks like: /widgets/foobar.go.html */}}
    {{ if .widget }}

      {{ $class := replace .widget "/" "-" }}

    {{/*
      {{ $widget := split . "/" }}
    {{ $namespace := index $widget 0 }}
    {{ $namespace }}
    {{ $widget := index $widget 1 }}
    {{ $widget }}
    */}}

    {{ $partial := (print "widgets/" .widget ".go.html") }}
    {{ $path := (print "themes/hugo-theme-seo/layouts/partials/" $partial) }}

    {{ if or ($here.Site.IsServer) (fileExists $path) }}
      <div class="widget {{ $class }}">
        {{ partial $partial (dict "context" $here "widget" .) }}
      </div>
    {{ else }}
      {{ $path }} does not exist
    {{ end }}

  {{ end }}
{{ end }}
</div>
{{ end }}
